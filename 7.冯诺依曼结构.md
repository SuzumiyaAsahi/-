# 这一箭射的正是地方

## 冯诺依曼结构基本思想

- 计算机硬件系统由运算器，存储器，控制器，输入设备和输出设备5大部件组成。

### 一些黑话

- 地址寄存器（MAR）—— 存放访存地址，经过地址译码后找到所选的存储单元。
- 数据寄存器（MDR）—— 用于暂存要从存储器中读或写的信息。
- 时序控制逻辑 —— 用于产生存储器操作所需的各种时序信号。
- 通用寄存器（GPRs）—— 这才是我们常见的寄存器。

## 运算器

运算器的核心是算数逻辑单元（ALU），包含若干寄存器，用于暂存操作数和中间结果，如累加器（ACC），乘商寄存器（MQ），操作数寄存器（X），变址寄存器（IX），基址寄存器（BR），程序状态寄存器（PSW）等。

## 控制器

控制器由程序计数器（PC），指令寄存器（IR）和控制单元（CU）组成。

### PC

用来存放当前欲执行指令的地址，它与主存的MAR之间有一条直接通路。

### IR

用来存放当前的指令，其内容来自主存的MDR。指令中的操作码OP（IR）送至CU，用以分析指令并发出各种微操作命令序列；而地址码Ad（IR）送至MAR，送至MAR，用以取操作数。

## 主机之家

- **运算器**和**控制器**组成CPU。
- CPU和主存储器共同构成主机。
- 除主机外的其他硬件装置等统称为外部设备，简称外设。

## CPU与主存与总线

CPU和主存之间通过地址，控制和数据3组总线相连。

MAR中的地址信息会直接送到地址线上。

控制线中有读/写信号线，控制MDR与主存之间的读写操作。

MDR通过数据线与主存相连。

## CPU手下大将总结

1. CU
2. PC
3. IR
4. PSW
5. ALU
6. GPRs
7. MAR
8. MDR

- 其中MAR和MDR是CPU与主存之间的交互窗口

## 关于 **PC**

与 X64 **IP**，RISC-V 的 **PC** 不同，考研中的**PC**更多的被称为*程序计数器*，每次执行一条指令之后就会$(PC) = PC + 1$，这个就是每条指令的长度都是一样的，都是 RISC 类型的指令，**PC** 就是单纯的表示指令的计数器。

此时 **PC** 的容量计算公式就是

<br/>

$$
\text{PC的最大容量} = \frac{\text{虚拟地址的最大值}}{\text{一条指令的长度}}
$$

## 违背常识?

在冯诺依曼计算机中，CPU是如何区别存储其中的指令和数据的？

- 通过**指令周期的不同阶段**来加以区分的

在*取指阶段*取出的就是*指令*

在*执行阶段*取出的就是*数据*

## 带彻带悟

在计算机组成原理这门课中，我们所说的指令与数据指的是ISA层级的指令与数据，即**操作码**和**操作数**。

所以说要分清**指令**和**代码**的区别

- 啊，周礼中有我，周礼中有你，周礼中有无穷的战斗力。
