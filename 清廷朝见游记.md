# 与可汗谈

## 于故宫

### 1.信号

地址，数据，中断号（因为需要用中断号来寻址）都可以通过数据线传送。

但唯独凡是带“**信号**”二字的，都只能通过控制总线传送。

> 或许信号并不是数据，只是单纯的控制信息吧（暂时先这么理解

### 2.I/O接口分类

磁盘驱动器专指磁盘的电子驱动部件。

可编程中断控制器属于I/O接口

### 3.端口与接口

接口和端口是两个不同的概念，端口是指接口电路中可以进行读/写的寄存器，若干端口加上响应的控制逻辑才可以组成接口。

## 于天坛

### 用户态与硬件与内核态

- 用户态指的是芯片在用户特权模式下的指令。

- 内核态指的是芯片在内核特权模式下的指令。

所有需要与硬件交互的指令都只能在内核态下去做。

所有不是显式的出现在汇编代码中的操作均属于**硬件**操作，而不属于内核态操作。

> 也就是说，我们认为操作系统属于软件范畴

用户态和内核态也都是属于软件范畴

```rust
        asm!(
            "mov r9,    {pop_rsp_ret};",
            "mov r8,    {try_hit};",
            "mov rax,   0x10;",
            "mov rdx,   {try_hit};",
            "mov rsi,   0x1bf52;",
            "mov rdi,   {dev_fd}",
            "syscall", // 这里保存断点，修改CPU特权级就属于硬件操作而不属于操作系统范畴
             try_hit = const try_hit,
             dev_fd = const dev_fd,
             pop_rsp_ret = const _pop_rsp_ret,
      )
```

## 于承德

### 迭代函数计数规则

注意第一次调用函数不计入迭代次数。

### C语言长整数类型

```c

short int a = 10;
short int b, c = 99;
long int m = 102023;
long int n, p = 562131;
```

这样 a、b、c 只占用 2 个字节的内存，而 m、n、p 可能会占用 8 个字节的内存

也可以将 int 省略，只写 short 和 long，如下所示：

```c
short a = 10;
short b, c = 99;
long m = 102023;
long n, p = 562131;
```

- 所以说long, long int 是有争议的类型，在不同的机器上和不同的操作系统上都用不同的体现。

| 平台/类型 | char | short | int | long | long long |
| --------- | ---- | ----- | --- | ---- | --------- |
| 16位      | 1    | 2     | 2   | 4    | 8         |
| 32位      | 1    | 2     | 4   | 4    | 8         |
| 64位      | 1    | 2     | 4   | 8    | 8         |

不过无符号整数的话建议使用`uint8_t`,`uint16_t`,`uint32_t`,`uint64_t`, 但是他们都在`stdint.h`，这个头文件里。
